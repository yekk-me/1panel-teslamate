# 腾讯云 DNS 解析配置指南

## 📋 DNS 解析配置步骤

### 1. 登录腾讯云控制台

1. 访问 [腾讯云控制台](https://console.cloud.tencent.com/)
2. 使用您的腾讯云账号登录

### 2. 进入 DNS 解析控制台

1. 在控制台首页搜索框输入 "DNS解析"
2. 点击进入 "DNS解析 DNSPod" 服务
3. 或直接访问: https://console.cloud.tencent.com/cns

### 3. 选择域名

1. 在域名列表中找到您购买的域名
2. 点击域名后的 "解析" 按钮

### 4. 添加 A 记录

#### 4.1 添加主域名记录

1. 点击 "添加记录" 按钮
2. 填写记录信息：
   - **主机记录**: `teslamate` （或您喜欢的子域名）
   - **记录类型**: `A`
   - **线路类型**: `默认`
   - **记录值**: `您的服务器公网IP地址`
   - **TTL**: `600`
3. 点击 "保存"

> 📌 **提示**: 您的服务器公网IP可以在腾讯云服务器控制台查看

#### 4.2 添加根域名记录（可选）

如果您希望根域名也能访问：

1. 再次点击 "添加记录"
2. 填写记录信息：
   - **主机记录**: `@`
   - **记录类型**: `A`
   - **线路类型**: `默认`
   - **记录值**: `您的服务器公网IP地址`
   - **TTL**: `600`
3. 点击 "保存"

#### 4.3 添加 www 记录（可选）

如果您希望 www 也能访问：

1. 再次点击 "添加记录"
2. 填写记录信息：
   - **主机记录**: `www`
   - **记录类型**: `CNAME`
   - **线路类型**: `默认`
   - **记录值**: `teslamate.yourdomain.com` （替换为您的实际域名）
   - **TTL**: `600`
3. 点击 "保存"

### 5. 验证 DNS 解析

#### 5.1 等待生效

DNS 解析通常需要 **10-30 分钟** 生效，请耐心等待。

#### 5.2 验证解析

在本地电脑打开命令行，执行：

```bash
# Windows 用户
nslookup teslamate.yourdomain.com

# Mac/Linux 用户
dig teslamate.yourdomain.com
```

如果返回您的服务器IP地址，说明解析已生效。

#### 5.3 在线验证工具

您也可以使用在线工具验证：
- [DNS检测工具](https://tool.chinaz.com/dns)
- [全球DNS传播检测](https://www.whatsmydns.net/)

## 🔧 常见问题

### Q1: DNS 解析不生效怎么办？

**A**: 
1. 确认记录配置正确
2. 等待更长时间（最多24小时）
3. 清除本地DNS缓存：
   ```bash
   # Windows
   ipconfig /flushdns
   
   # Mac
   sudo dscacheutil -flushcache
   
   # Linux
   sudo systemctl restart systemd-resolved
   ```

### Q2: 提示域名未备案怎么办？

**A**: 
- 如果使用腾讯云海外服务器，域名无需备案
- 如果使用国内服务器，需要完成ICP备案
- 建议使用海外服务器避免备案问题

### Q3: SSL 证书申请失败怎么办？

**A**:
1. 确认域名解析已生效
2. 确认80端口开放
3. 检查防火墙设置
4. 重新运行部署脚本

### Q4: 如何修改子域名？

**A**:
1. 在 DNS 控制台修改或添加新的 A 记录
2. 修改服务器上的 `.env` 文件中的 `DOMAIN` 变量
3. 重启服务：`docker-compose restart`

## 📝 DNS 记录示例

假设您的域名是 `example.com`，服务器IP是 `1.2.3.4`：

| 主机记录 | 记录类型 | 记录值 | 说明 |
|---------|----------|--------|------|
| teslamate | A | 1.2.3.4 | TeslaMate 主域名 |
| @ | A | 1.2.3.4 | 根域名（可选） |
| www | CNAME | teslamate.example.com | www访问（可选） |

最终访问地址：`https://teslamate.example.com`

## 🎯 下一步

DNS 配置完成后，您可以：

1. 等待 DNS 解析生效（10-30分钟）
2. 运行 TeslaMate 安装脚本
3. 访问您的域名开始使用 TeslaMate

---

**需要帮助？** 请参考主部署指南或联系技术支持。